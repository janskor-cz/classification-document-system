{% extends “base.html” %}

{% block title %}Login - Classification Document System{% endblock %}

{% block extra_css %}

<style>
    .login-container {
        min-height: calc(100vh - 200px);
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .login-card {
        max-width: 400px;
        width: 100%;
        border: none;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        border-radius: 15px;
    }
    .login-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 15px 15px 0 0;
    }
    .form-floating > .form-control:focus ~ label {
        color: #667eea;
    }
    .form-floating > .form-control:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
    }
    .btn-login {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        border-radius: 10px;
        padding: 12px;
        font-weight: 500;
    }
    .btn-login:hover {
        background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
        transform: translateY(-1px);
    }
    .classification-info {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 10px;
        border-left: 4px solid #667eea;
    }
</style>

{% endblock %}

{% block content %}

<div class="login-container">
    <div class="login-card card">
        <div class="login-header card-header text-center py-4">
            <i class="fas fa-shield-alt fa-3x mb-3"></i>
            <h4 class="mb-0">Classification System</h4>
            <p class="mb-0 opacity-75">Secure Document Access</p>
        </div>

```
    <div class="card-body p-4">
        <form method="POST" action="{{ url_for('auth.login') }}" id="login-form">
            {{ csrf_token() }}
            
            <div class="form-floating mb-3">
                <input type="email" 
                       class="form-control" 
                       id="email" 
                       name="email" 
                       placeholder="name@example.com"
                       value="{{ request.form.email or '' }}"
                       required>
                <label for="email">
                    <i class="fas fa-envelope me-2"></i>Email Address
                </label>
            </div>
            
            <div class="form-floating mb-3">
                <input type="password" 
                       class="form-control" 
                       id="password" 
                       name="password" 
                       placeholder="Password"
                       required>
                <label for="password">
                    <i class="fas fa-lock me-2"></i>Password
                </label>
            </div>
            
            <div class="form-check mb-3">
                <input class="form-check-input" 
                       type="checkbox" 
                       id="remember_me" 
                       name="remember_me">
                <label class="form-check-label" for="remember_me">
                    Remember me for 30 days
                </label>
            </div>
            
            <button type="submit" class="btn btn-primary btn-login w-100 mb-3">
                <i class="fas fa-sign-in-alt me-2"></i>
                <span class="login-text">Sign In</span>
                <span class="login-spinner d-none">
                    <i class="fas fa-spinner fa-spin me-2"></i>Signing in...
                </span>
            </button>
            
            <div class="text-center">
                <a href="{{ url_for('auth.forgot_password') }}" class="text-decoration-none">
                    <i class="fas fa-key me-1"></i>Forgot your password?
                </a>
            </div>
        </form>
    </div>
    
    <div class="card-footer bg-transparent border-0 text-center py-3">
        <p class="mb-2 text-muted small">Don't have an account?</p>
        <a href="{{ url_for('auth.register') }}" class="btn btn-outline-primary">
            <i class="fas fa-user-plus me-2"></i>Create Account
        </a>
    </div>
</div>
```

</div>

<!-- Classification Information -->

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="classification-info p-4">
                <h6 class="fw-bold mb-3">
                    <i class="fas fa-info-circle me-2 text-primary"></i>
                    Access Control Information
                </h6>
                <div class="row">
                    <div class="col-md-4 text-center mb-3">
                        <div class="badge bg-success mb-2 p-2">
                            <i class="fas fa-globe me-1"></i>Public
                        </div>
                        <div class="small text-muted">General access documents</div>
                    </div>
                    <div class="col-md-4 text-center mb-3">
                        <div class="badge bg-warning mb-2 p-2">
                            <i class="fas fa-building me-1"></i>Internal
                        </div>
                        <div class="small text-muted">Company internal documents</div>
                    </div>
                    <div class="col-md-4 text-center mb-3">
                        <div class="badge bg-danger mb-2 p-2">
                            <i class="fas fa-lock me-1"></i>Confidential
                        </div>
                        <div class="small text-muted">Restricted access documents</div>
                    </div>
                </div>
                <hr class="my-3">
                <div class="small text-muted text-center">
                    <i class="fas fa-shield-alt me-1"></i>
                    Powered by Hyperledger Identus for secure credential verification
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}

<script>
document.getElementById('login-form').addEventListener('submit', function(e) {
    const submitBtn = this.querySelector('button[type="submit"]');
    const loginText = submitBtn.querySelector('.login-text');
    const loginSpinner = submitBtn.querySelector('.login-spinner');
    
    // Show loading state
    loginText.classList.add('d-none');
    loginSpinner.classList.remove('d-none');
    submitBtn.disabled = true;
    
    // If there's an error, the form will reload and reset the button state
    // For successful login, the page will redirect
});

// Auto-focus email field
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('email').focus();
});

// Password strength indicator (optional)
document.getElementById('password').addEventListener('input', function() {
    // You can add password strength validation here if needed
});

// Demo login functionality (remove in production)
{% if config.FLASK_ENV == 'development' %}
function fillDemoCredentials() {
    document.getElementById('email').value = 'demo@example.com';
    document.getElementById('password').value = 'demo123';
}

// Add demo button in development
document.addEventListener('DOMContentLoaded', function() {
    const cardFooter = document.querySelector('.card-footer');
    const demoBtn = document.createElement('button');
    demoBtn.type = 'button';
    demoBtn.className = 'btn btn-outline-secondary btn-sm mt-2';
    demoBtn.innerHTML = '<i class="fas fa-user me-1"></i>Demo Login';
    demoBtn.onclick = fillDemoCredentials;
    cardFooter.appendChild(demoBtn);
});
{% endif %}
</script>

{% endblock %}